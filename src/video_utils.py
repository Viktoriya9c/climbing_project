import os

def format_time(ms):
    """
    Преобразует время из миллисекунд в удобный текстовый формат MM:SS.
    
    Аргументы:
        ms: время в миллисекундах (полученное из cv2.CAP_PROP_POS_MSEC).
    Возвращает:
        Строку формата "минуты:секунды" (например, "01:25").
    """
    # Вычисляем количество целых секунд
    seconds = int((ms / 1000) % 60)
    # Вычисляем количество целых минут
    minutes = int((ms / (1000 * 60)) % 60)
    
    # Возвращаем строку с ведущими нулями (02d означает минимум 2 цифры)
    return f"{minutes:02d}:{seconds:02d}"

def ensure_dir(file_path):
    """
    Проверяет существование директории для указанного файла и создает её, если нужно.
    Это предотвращает ошибки при попытке записи логов или результатов в несуществующие папки.
    
    Аргументы:
        file_path: полный путь к файлу (например, "outputs/timestamps/result.txt").
    """
   
    directory = os.path.dirname(file_path)
    
    # Если путь содержит папку и она еще не создана — создаем её
    if directory and not os.path.exists(directory):
        # makedirs создает всю цепочку папок (например, и outputs, и внутри неё timestamps)
        os.makedirs(directory)